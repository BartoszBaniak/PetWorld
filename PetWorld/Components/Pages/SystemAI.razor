@page "/systemai"
@rendermode InteractiveServer

<PageTitle>System AI Writer-Critic - PetWorld</PageTitle>

<h3>System AI Writer-Critic</h3>

<div class="system-ai-container">
    <div class="row">
        <div class="col-md-6">
            <div class="card mb-4">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">Writer Agent</h5>
                </div>
                <div class="card-body">
                    <h6>Opis:</h6>
                    <p>
                        Writer Agent jest odpowiedzialny za generowanie odpowiedzi dla klientów.
                        Jego zadaniem jest:
                    </p>
                    <ul>
                        <li>Analiza pytania klienta</li>
                        <li>Wyszukiwanie odpowiednich produktów w katalogu</li>
                        <li>Generowanie pomocnej i profesjonalnej odpowiedzi</li>
                        <li>Rekomendacja produktów odpowiednich dla potrzeb klienta</li>
                        <li>Dostarczanie porad dotyczących zwierząt</li>
                    </ul>

                    <h6 class="mt-3">Model AI:</h6>
                    <p class="badge bg-success">GPT-4o</p>

                    <h6 class="mt-3">Kontekst:</h6>
                    <ul>
                        <li>Dostęp do pełnego katalogu produktów</li>
                        <li>Feedback od Critic Agent (w przypadku odrzucenia)</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card mb-4">
                <div class="card-header bg-warning text-dark">
                    <h5 class="mb-0">Critic Agent</h5>
                </div>
                <div class="card-body">
                    <h6>Opis:</h6>
                    <p>
                        Critic Agent ocenia jakość odpowiedzi wygenerowanej przez Writer Agent.
                        Jego zadaniem jest:
                    </p>
                    <ul>
                        <li>Weryfikacja czy odpowiedź odpowiada na pytanie klienta</li>
                        <li>Sprawdzenie czy polecane produkty są odpowiednie</li>
                        <li>Ocena profesjonalizmu i pomocności odpowiedzi</li>
                        <li>Walidacja rekomendacji produktowych</li>
                    </ul>

                    <h6 class="mt-3">Zwracane wartości:</h6>
                    <ul>
                        <li><strong>approved:</strong> true/false</li>
                        <li><strong>feedback:</strong> szczegółowe wyjaśnienie (jeśli odrzucono)</li>
                    </ul>

                    <h6 class="mt-3">Model AI:</h6>
                    <p class="badge bg-success">GPT-4o</p>
                </div>
            </div>
        </div>
    </div>

    <div class="card">
        <div class="card-header bg-info text-white">
            <h5 class="mb-0">Proces Writer-Critic</h5>
        </div>
        <div class="card-body">
            <h6>Przepływ pracy:</h6>
            <ol>
                <li>
                    <strong>Iteracja 1:</strong>
                    <ul>
                        <li>Writer generuje odpowiedź na podstawie pytania i katalogu produktów</li>
                        <li>Critic ocenia odpowiedź</li>
                        <li>Jeśli zaakceptowano → koniec</li>
                        <li>Jeśli odrzucono → przejdź do iteracji 2 z feedbackiem</li>
                    </ul>
                </li>
                <li>
                    <strong>Iteracja 2:</strong>
                    <ul>
                        <li>Writer poprawia odpowiedź na podstawie feedbacku z Critic</li>
                        <li>Critic ponownie ocenia</li>
                        <li>Jeśli zaakceptowano → koniec</li>
                        <li>Jeśli odrzucono → przejdź do iteracji 3 z feedbackiem</li>
                    </ul>
                </li>
                <li>
                    <strong>Iteracja 3 (ostatnia):</strong>
                    <ul>
                        <li>Writer ponownie poprawia odpowiedź</li>
                        <li>Critic ocenia po raz ostatni</li>
                        <li>Niezależnie od wyniku → używana jest ta odpowiedź</li>
                    </ul>
                </li>
            </ol>

            <div class="alert alert-warning mt-3" role="alert">
                <strong>Maksymalna liczba iteracji:</strong> 3
            </div>

            <h6 class="mt-3">Zalety systemu Writer-Critic:</h6>
            <ul>
                <li>Zapewnia wysoką jakość odpowiedzi</li>
                <li>Automatyczna weryfikacja i korekta</li>
                <li>Redukcja błędów i nieodpowiednich rekomendacji</li>
                <li>Spójna i profesjonalna komunikacja z klientami</li>
            </ul>
        </div>
    </div>

    <div class="card mt-4">
        <div class="card-header bg-secondary text-white">
            <h5 class="mb-0">Konfiguracja</h5>
        </div>
        <div class="card-body">
            <h6>Klucz API OpenAI:</h6>
            <p>Konfigurowalny przez:</p>
            <ul>
                <li><code>appsettings.json</code> → sekcja <code>"OpenAI:ApiKey"</code></li>
                <li>Zmienną środowiskową → <code>OPENAI_API_KEY</code></li>
            </ul>

            <h6 class="mt-3">Model:</h6>
            <p>Domyślnie: <strong>gpt-4o</strong></p>
            <p class="text-muted">
                Można zmienić w pliku <code>Program.cs</code> w sekcji konfiguracji OpenAI.
            </p>

            <h6 class="mt-3">Framework:</h6>
            <p>
                <a href="https://github.com/microsoft/agent-framework" target="_blank">
                    Microsoft Agent Framework
                </a>
            </p>
            <p class="text-muted">
                Wykorzystuje <code>Microsoft.Agents.AI.OpenAI</code> do integracji z OpenAI.
            </p>
        </div>
    </div>
</div>

<style>
    .system-ai-container {
        max-width: 1200px;
        margin: 0 auto;
    }

    .card {
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    code {
        background-color: #f4f4f4;
        padding: 2px 6px;
        border-radius: 3px;
        font-family: 'Courier New', monospace;
    }
</style>
